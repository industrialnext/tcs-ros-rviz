<?xml version="1.0"?>
<!-- Robot Description ported from the original PF3400SX.urdf file to make robot xacro modular -->
<robot xmlns:xacro="https://www.ros.org/wiki/xacro">
  <!-- Macro of robot itself -->
  <xacro:macro name="pf3400" params="prefix color1:=White color2:=Aluminum">
    <!-- Place additional parameters here -->

	<!-- Link & Joint Description -->
    <link name="${prefix}z_column">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/z_column.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color1}"/>
      </visual>
    </link>
    <joint name="${prefix}J1" type="prismatic">
      <parent link="${prefix}z_column"/>
      <child link="${prefix}z_carriage"/>
      <axis xyz="0 0 1"/>
      <origin xyz="-0.071 0.000 0.15685" rpy="0 0 0"/>
      <limit effort="1000.0" lower="0.015" upper="0.415" velocity="0.5"/>
    </joint>

    <link name="${prefix}z_carriage">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/z_carriage.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color1}"/>
      </visual>
    </link>
    <joint name="${prefix}J2" type="revolute">
      <parent link="${prefix}z_carriage"/>
      <child link="${prefix}inner_link"/>
      <axis xyz="0 0 1"/>
      <origin xyz="0.071 0.000 -0.051" rpy="0 0 0"/>
      <limit effort="1000.0" lower="-1.62316" upper="1.62316" velocity="0.5"/>
    </joint>

    <link name="${prefix}inner_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/inner_link.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color1}"/>
      </visual>
    </link>
    <joint name="${prefix}J3" type="revolute">
      <parent link="${prefix}inner_link"/>
      <child link="${prefix}outer_link"/>
      <axis xyz="0 0 1"/>
      <origin xyz="0.302 0 -0.073908" rpy="0 0 0"/>
      <limit effort="1000.0" lower="0.20944" upper="6.07375" velocity="0.5"/>
	</joint>

	<link name="${prefix}outer_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/outer_link.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color1}"/>
      </visual>
    </link>
    <joint name="${prefix}J4" type="revolute">
      <parent link="${prefix}outer_link"/>
      <child link="${prefix}hand"/>
      <axis xyz="0 0 1"/>
      <origin xyz="0.289 0 -0.032942" rpy="0 0 0"/>
      <limit effort="1000.0" lower="-16.7552" upper="16.7552" velocity="0.5"/>
    </joint>

	<link name="${prefix}hand">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/PF3400_Hand.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color1}"/>
      </visual>
    </link>
	<joint name="${prefix}J5" type="prismatic">
      <parent link="${prefix}hand"/>
      <child link="${prefix}left_finger"/>
      <axis xyz="0 1 0"/>
      <origin xyz="0.0783 0.00 -0.0413" rpy="0 0 0"/>
      <limit effort="1000.0" lower="0.051954" upper="0.070" velocity="0.5"/>
    </joint>
	<joint name="${prefix}J5_mirror" type="prismatic">
	  <parent link="${prefix}hand"/>
      <child link="${prefix}right_finger"/>
      <axis xyz="0 -1 0"/>
      <origin xyz="0.0783 0.00 -0.0413" rpy="0 0 0"/>
      <limit effort="1000.0" lower="0.051954" upper="0.070" velocity="0.5"/>
      <mimic joint="${prefix}J5" multiplier="1"/>
    </joint>

	<link name="${prefix}left_finger">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/left_finger.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color2}"/>
      </visual>
    </link>
    <link name="${prefix}right_finger">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <geometry>
          <mesh filename="package://pf3400_description/meshes/right_finger.STL" scale="0.001 0.001 0.001"/>
        </geometry>
		<material name="${color2}"/>
      </visual>
    </link>
    <joint name="${prefix}ee_part_joint" type="fixed">
      <parent link="${prefix}hand"/>
      <child link="${prefix}part"/>
      <origin xyz="0.12255 0.000 -0.0733" rpy="3.14 0 0"/>
    </joint>
    <link name="${prefix}part"/>
    <!-- End of Joint and Link Description -->
  </xacro:macro>
</robot>
